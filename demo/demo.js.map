{"version":3,"file":"demo.js","sources":["../demo.ts"],"sourcesContent":["// Use the global thumbnailGen object instead of importing directly\n\nconst input = document.querySelector<HTMLInputElement>('#input');\nconst preview = document.querySelector<HTMLImageElement>('#preview');\nconst timer = document.querySelector<HTMLDivElement>('#timer');\nconst log = document.querySelector<HTMLDivElement>('#log');\n\nfunction updateTimer(ms: number) {\n  if (timer) timer.textContent = `Total time: ${ms}ms`;\n}\n\nfunction addLog(message: string) {\n  if (log) log.innerHTML += `${message}<br>`;\n  console.log(message);\n}\n\n// Disable file input until thumbnailer is ready\nif (input) input.disabled = true;\n\n// Wait for the DOM to be fully loaded\ndocument.addEventListener('DOMContentLoaded', () => {\n  addLog('Waiting for thumbnailer to initialize...');\n  \n  const checkInterval = setInterval(() => {\n    if (typeof window.thumbnailGen !== 'undefined' && window.thumbnailGen.isInitialized()) {\n      clearInterval(checkInterval);\n      addLog('Thumbnailer is ready to use');\n      if (input) input.disabled = false;\n    }\n  }, 100);\n});\n\n// Handle file input changes\ninput?.addEventListener('change', async () => {\n  const file = input?.files?.[0];\n  if (!file || !preview || !window.thumbnailGen) return;\n\n  try {\n    if (log) log.innerHTML = '';\n    addLog(`Processing file: ${file.name} (${file.type})`);\n    const startTime = performance.now();\n\n    const arrayBuffer = await file.arrayBuffer();\n    const result = await window.thumbnailGen.createThumbnail({\n      file: new Uint8Array(arrayBuffer),\n      filename: file.name,\n      mimeType: file.type,\n      maxWidth: 500\n    });\n    \n    const blob = new Blob([result.image], { type: result.mimeType });\n    preview.src = URL.createObjectURL(blob);\n    \n    addLog(`Generated thumbnail: ${result.width}x${result.height} (${result.mimeType})`);\n\n    const endTime = performance.now();\n    updateTimer(Math.round(endTime - startTime));\n  } catch (error) {\n    console.error(error);\n    addLog(`Error: ${error instanceof Error ? error.message : String(error)}`);\n  }\n});\n"],"names":[],"mappings":"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"}