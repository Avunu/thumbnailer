{"version":3,"file":"demo.js","sources":["../src/demo/demo.ts"],"sourcesContent":["// Use the global thumbnailGen object instead of importing directly\n\nconst input = document.querySelector<HTMLInputElement>('#input');\nconst preview = document.querySelector<HTMLImageElement>('#preview');\nconst timer = document.querySelector<HTMLDivElement>('#timer');\nconst log = document.querySelector<HTMLDivElement>('#log');\n\nfunction updateTimer(ms: number) {\n  if (timer) timer.textContent = `Total time: ${ms}ms`;\n}\n\nfunction addLog(message: string) {\n  if (log) log.innerHTML += `${message}<br>`;\n  console.log(message);\n}\n\n// Disable file input until thumbnailer is ready\nif (input) input.disabled = true;\n\n// Wait for the DOM to be fully loaded\ndocument.addEventListener('DOMContentLoaded', () => {\n  addLog('Waiting for thumbnailer to initialize...');\n  \n  const checkInterval = setInterval(() => {\n    if (typeof window.thumbnailGen !== 'undefined') {\n      clearInterval(checkInterval);\n      \n      addLog('Thumbnailer object found in global scope');\n      \n      window.thumbnailGen.ready\n        .then(() => {\n          addLog('Thumbnailer is ready to use');\n          if (input) input.disabled = false;\n        })\n        .catch((error: any) => {\n          console.error('Thumbnailer initialization failed:', error);\n          addLog(`Initialization error: ${error instanceof Error ? error.message : String(error)}`);\n        });\n    }\n  }, 100);\n});\n\n// Handle file input changes\ninput?.addEventListener('change', async () => {\n  const file = input?.files?.[0];\n  if (!file || !preview || !window.thumbnailGen) return;\n\n  try {\n    if (log) log.innerHTML = '';\n    addLog(`Processing file: ${file.name} (${file.type})`);\n    const startTime = performance.now();\n\n    const arrayBuffer = await file.arrayBuffer();\n    const result = await window.thumbnailGen.createThumbnail({\n      file: new Uint8Array(arrayBuffer),\n      filename: file.name,\n      mimeType: file.type,\n      maxWidth: 500\n    });\n    \n    const blob = new Blob([result.image], { type: result.mimeType });\n    preview.src = URL.createObjectURL(blob);\n    \n    addLog(`Generated thumbnail: ${result.width}x${result.height} (${result.mimeType})`);\n\n    const endTime = performance.now();\n    updateTimer(Math.round(endTime - startTime));\n  } catch (error) {\n    console.error(error);\n    addLog(`Error: ${error instanceof Error ? error.message : String(error)}`);\n  }\n});\n"],"names":[],"mappings":"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"}